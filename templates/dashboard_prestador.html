{% extends 'base.html' %}

{% block content %}

<h2>Ãrea do Prestador ğŸ”§</h2>

<a href="{% url 'services:criar_servico' %}">
    â• Novo ServiÃ§o
</a>

<br><br>

<a href="{% url 'services:pedidos_prestador' %}">
    ğŸ“¥ Pedidos Pendentes
</a>

<br>

<a href="{% url 'services:servicos_andamento' %}">
    ğŸš§ ServiÃ§os em Andamento
</a>

<hr>

<!-- ================= PEDIDOS PENDENTES ================= -->

<h3>ğŸ“¥ Pedidos Pendentes</h3>

{% for pedido in pedidos_pendentes %}
    <div style="border:1px solid #ccc; padding:10px; margin:10px;">
        <strong>{{ pedido.servico.nome }}</strong><br>
        Cliente: {{ pedido.cliente.username }}<br>
        Status: {{ pedido.status }}

        <br><br>

        <a href="{% url 'services:aceitar_pedido' pedido.id %}">
            âœ… Aceitar
        </a>

        <a href="{% url 'services:recusar_pedido' pedido.id %}">
            âŒ Recusar
        </a>
    </div>
{% empty %}
<p>Nenhum pedido pendente.</p>
{% endfor %}

<hr>

<!-- ================= EM ANDAMENTO ================= -->

<h3>ğŸš§ ServiÃ§os Aceitos</h3>

{% for pedido in pedidos_andamento %}
    <div style="border:1px solid #4CAF50; padding:10px; margin:10px;">
        <strong>{{ pedido.servico.nome }}</strong><br>
        Cliente: {{ pedido.cliente.username }}<br>
        Status: {{ pedido.status }}

        <br><br>

        {% if pedido.status == 'aceito' %}
            <a href="{% url 'services:iniciar_servico' pedido.id %}">
                â–¶ï¸ Iniciar ServiÃ§o
            </a>
        {% endif %}

        {% if pedido.status == 'em_andamento' %}
            <a href="{% url 'services:finalizar_servico' pedido.id %}">
                âœ… Finalizar ServiÃ§o
            </a>
        {% endif %}
    </div>
{% empty %}
<p>Nenhum serviÃ§o em andamento.</p>
{% endfor %}

<hr>

<!-- ================= MEUS SERVIÃ‡OS ================= -->

<h3>ğŸ›  Meus ServiÃ§os</h3>

{% for servico in servicos %}
    <p>
        <strong>{{ servico.nome }}</strong>

        <a href="{% url 'services:editar_servico' servico.id %}">
            Editar
        </a>

        <a href="{% url 'services:excluir_servico' servico.id %}">
            Excluir
        </a>
    </p>
{% empty %}
<p>VocÃª ainda nÃ£o cadastrou serviÃ§os.</p>
{% endfor %}

{% endblock %}
